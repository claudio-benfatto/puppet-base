---
classes:
 - foodity-mysql
 - foodity-apache
 - foodity-java
 - foodity-php


##########################MYSQL####################

mysql::server::old_root_password: ENC[PKCS7,MIIBeQYJKoZIhvcNAQcDoIIBajCCAWYCAQAxggEhMIIBHQIBADAFMAACAQEwDQYJKoZIhvcNAQEBBQAEggEAgHPGKy9qfkIN0lmBMtNkCEIpzr2PNQ3ulF5CXhOx37Gz642c6RbnDoqUiRQXbPTvtZ6vjHLZ9i7wvhP39mei22N7CVw53QjNDY3y4/VUcWA8ly1x2tnzjw5sU5kt1JKzNiIemqNd/OXRiO28kSvImhglJMkvbCXHBmVhwzz6UTtT0Y7oO1NLRJIr7Ri6PwMsuNVGhRT/uEt8xEBXzcToxg51SmpTwuIZgylCaYhkzsS5oNPseRAvnNaoJ1IT4uWxdvlHUk/F1NPTfIhEG+EXUx5levpY2YIcG4OJ42ISqdeZI7GPV9GDCALdzLL2MDi3aT6CrGnwbGDmmL5wbh1uvTA8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBAyf8eLm0jHMznhcJqCizkzgBBMzn0jmGn4FBc/qiu0xI7E]
mysql::server::root_password: ENC[PKCS7,MIIBeQYJKoZIhvcNAQcDoIIBajCCAWYCAQAxggEhMIIBHQIBADAFMAACAQEwDQYJKoZIhvcNAQEBBQAEggEAgHPGKy9qfkIN0lmBMtNkCEIpzr2PNQ3ulF5CXhOx37Gz642c6RbnDoqUiRQXbPTvtZ6vjHLZ9i7wvhP39mei22N7CVw53QjNDY3y4/VUcWA8ly1x2tnzjw5sU5kt1JKzNiIemqNd/OXRiO28kSvImhglJMkvbCXHBmVhwzz6UTtT0Y7oO1NLRJIr7Ri6PwMsuNVGhRT/uEt8xEBXzcToxg51SmpTwuIZgylCaYhkzsS5oNPseRAvnNaoJ1IT4uWxdvlHUk/F1NPTfIhEG+EXUx5levpY2YIcG4OJ42ISqdeZI7GPV9GDCALdzLL2MDi3aT6CrGnwbGDmmL5wbh1uvTA8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBAyf8eLm0jHMznhcJqCizkzgBBMzn0jmGn4FBc/qiu0xI7E]
mysql::server::config_file: '/etc/mysql/my.cnf'
mysql::server::manage_config_file: true
 
mysql::server::databases:
    'service':
      charset: 'utf8'
      ensure: 'present'

mysql::server::users:
  'claudio@localhost':
    ensure: 'present'
    password_hash: '*7ACE763ED393514FE0C162B93996ECD195FFC4F5'
  'service@localhost':
    ensure: 'present'
    password_hash: '*C80A94EF37B4CA1599BA47CC95530C43CACD7DA5'


#############################APACHE#######################

apache_software:
  libapache2-mod-jk:
    ensure: latest

apache_folders:
    '/var/www/service':
      path: '/var/www/service'
      ensure: 'directory'
      mode: '0664'
      owner: 'www-data'
      recurse: 'true'
    '/var/www/service/www':
      path: '/var/www/service/www'
      ensure: 'directory'
      mode: '0664'
      owner: 'www-data'
      recurse: 'true'
      require: "File[/var/www/service]"
    '/var/www/service/www/public':
      path: '/var/www/service/www/public'
      ensure: 'directory'
      mode: '0664'
      owner: 'www-data'
      recurse: 'true'
      require: "File[/var/www/service/www]"

apache_vhosts:
  'service':
    port: '80'
    servername: 'service.foodity.com'
    docroot: '/var/www/service/www/public'
    access_log: true
    access_log_file: 'access.log'
    access_log_format: 'combined'
    error_log: true
    error_log_file: 'error.log'
    options:
      - '-Indexes'
    php_admin_values:
      - 'open_basedir /var/www/service:/tmp'
      - 'upload_tmp_dir /var/www/service/tmp'
      - 'register_globals off'
    require: 'File[/var/www/service/www/public]'


########################################################PHP#####################################

php_software:
  php5-curl:
    ensure: latest
  php5-mcrypt:
    ensure: latest
  php-pear:
    ensure: latest
  php5-sqlite:
    ensure: latest
  php5-intl:
    ensure: latest
  phpmyadmin:
    ensure: latest
    require: 
     -  'Package[mysql-server]'
     -  'Package[apache2]'

