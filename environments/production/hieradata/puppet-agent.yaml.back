---
classes:
 - mysql::server
 - profiles::apache
 - apt
 - java

mysql::server::root_password: 'rewit555'

mysql::server:
  databases:
    'service':
      user: 'service'
      password: 'changeme'
      charset: 'utf8'
      host: 'localhost'
      ensure: 'present'

mysql::server:
  users:
  'claudio@localhost':
    ensure: 'present'
    password_hash: '*7ACE763ED393514FE0C162B93996ECD195FFC4F5'

profiles::apache:
  default_mods: 'false'
  default_confd_files: 'false'

service_docroot:
    '/var/www/service':
      path: '/var/www/service'
      ensure: 'directory'
      mode: '0664'
      owner: 'www-data'
      recurse: 'true'
    '/var/www/service/www':
      path: '/var/www/service/www'
      ensure: 'directory'
      mode: '0664'
      owner: 'www-data'
      recurse: 'true'
      require: "File[/var/www/service]"
    '/var/www/service/www/public':
      path: '/var/www/service/www/public'
      ensure: 'directory'
      mode: '0664'
      owner: 'www-data'
      recurse: 'true'
      require: "File[/var/www/service/www]"

packages:
  'php5':
     ensure: 'installed'
  'libapache2-mod-php5':
     ensure: 'installed'
  'php5-curl':
     ensure: 'installed'
  'php5-mcrypt':
     ensure: 'installed'
  'php5-sqlite':
     ensure: 'installed'
  'php-pear':
    ensure: 'installed'
  'phpmyadmin':
    ensure: 'installed'
  'lynx':
    ensure: 'installed'
  'git':
    ensure: 'installed'
  'dselect':
    ensure: 'installed'
  'libicu48':
    ensure: 'installed'
  'expect':
    ensure: 'installed'
  'python-software-properties':
    ensure: 'installed'


modules:
  'rewrite':
    package_ensure: 'present'
  'php':
    package_ensure: 'present'
  'proxy': 
    package_ensure: 'present'
  'status': 
    package_ensure: 'present'

vhosts:
  'service':
    port: '80'
    servername: 'service.foodity.com'
    docroot: '/var/www/service/www/public'
    access_log: true
    access_log_file: 'access.log'
    access_log_format: 'combined'
    error_log: true
    error_log_file: 'error.log'
    options:
      - '-Indexes'
    #php_admin_values:
    #  - 'open_basedir /var/www/service:/tmp'
    #  - 'upload_tmp_dir /var/www/service/tmp'
    #  - 'register_globals off'
    require: 'File[/var/www/service/www/public]'
    notify: 'Service[apache2]'
    require: 'Package[apache2]'
    require: 'Apache::Mod[php]'

apt:always_apt_update: true

repositories:
  'ppa:webupd8team/java':
    require: 'Package[python-software-properties]'

java:
  distribution: 'precise'
  version: 'present'
  package: 'oracle-jre'
  require: 'Apt::Ppa[ppa:webupd8team/java]'

