---

classes:
  - foodity-jenkins
  - foodity_php
  - foodity_mysql
  - foodity-postgresql
  - foodity-rabbitmq
  - foodity-nodejs
  - locales

locales::locales: [ 'en_US en_US.UTF-8', 'en_GB en_GB.UTF-8' ]

jenkins::repo:                false
jenkins::install_java:        false
jenkins::configure_firewall:  false

jenkins::slave::install_java: false
jenkins::slave::manage_slave_user: false
jenkins::slave::slave_user: 'jenkins'
jenkins::slave::slave_home: '/var/lib/jenkins'
jenkins::slave::enable:     true

foodity_php::with_mysql: true


#mysql::server::old_root_password: '0A0662C40EED3D50185D767D84F57730CC7D149A'
mysql::server::root_password: '0A0662C40EED3D50185D767D84F57730CC7D149A'
  
mysql::server::config_file: '/etc/mysql/my.cnf'
mysql::server::manage_config_file: true
  
mysql::server::databases:
    'service':
      charset: 'utf8'
      ensure: 'absent'
  
mysql::server::users:
#    'root@localhost':
#      ensure: 'present'
#      password_hash: '0A0662C40EED3D50185D767D84F57730CC7D149A'
    'claudio@localhost':
      ensure: 'present'
      password_hash: '*7ACE763ED393514FE0C162B93996ECD195FFC4F5'
    'service@localhost':
      ensure: 'absent'
      password_hash: '*C80A94EF37B4CA1599BA47CC95530C43CACD7DA5'
  
#mysql::server::grants:
#    'root@localhost/*.*':
#      ensure: 'present'
#      options: ['GRANT']
#      privileges: ['ALL']
#      table: '*.*'
#      user: 'root@localhost'


postgresql_roles:
  'jenkins':
    createrole: false
    superuser: false
    createdb: true

pg_hba_rules:
  'postgresql host authentication method':
    description: 'Open up postgresql for access from 127.0.0.1/32'
    type: 'host'
    database: 'all'
    user: 'all'
    address: '127.0.0.1/32'
    auth_method: 'trust'
    order: '021'

rabbitmq::service_manage: false
rabbitmq::port: '5672'
rabbitmq::delete_guest_user: true

rabbitmq_plugins:
  'rabbitmq_management':
    ensure: 'present'

common_users:
  
  jenkins:
    uid: 80001,
    comment: 'jenkins user'
    password: $1$V.L5ADcw$SY4xFBe1sFDSsb1ysG80O/
    home: '/var/lib/jenkins'
    groups: jenkins
    ssh_auth_keys:
      jenkins-master:
         type: 'ssh-rsa' 
         key: 'AAAAB3NzaC1yc2EAAAADAQABAAABAQCl5KwLzwo9tq+AwViQM7CcIj3JDjOIDT4fsQCpPqiJ9X3GahMhLQbu6ie0ZPLhlEI+UXNap4cxYDHqEAten5mXMc8LW1FXqqMjEGTUYzPx04ywdfuy9Zz9CNtYoLjEks5+K4Bf+xp4FhxB9O9x6aSHMcsI3GtovQWojaXtzp9j7AN2CjDF54IcOFyvr/gY/7/s5GiuEYxbWUtnfg3gNU0r6/X+1gRj3o5Ek+6NE8Umu98Tcg4eUUXEZT33L3B10G4HZpEvY3c7r9Opfd5xSIqOIGKm+E8uxVWU32E0+tOiib9Q9e1Gu/QszeJluJtPP2OvhzQwCh6D5/61i8kfSqZH'



software:
  'maven':
    ensure: 'latest'
  'git':
    ensure: 'latest'

php_software:
  php5-curl:
    ensure: latest
  php5-imagick:
    ensure: latest
  php5-xdebug:
    ensure: latest
  php5-mcrypt:
    ensure: latest
  php-pear:
    ensure: latest
  php5-sqlite:
    ensure: latest
  php5-intl:
    ensure: latest
  php5-mysql:
    ensure: latest

